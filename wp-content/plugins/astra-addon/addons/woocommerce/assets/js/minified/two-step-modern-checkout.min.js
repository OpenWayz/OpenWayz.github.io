function twoStepModernCheckout(e){e.preventDefault();const t=document.querySelectorAll(".ast-embed-checkout-form-steps .steps"),o="ast-current";var c="step-one",r="step-two";const s=document.querySelector(".ast-two-step-wrap"),l=document.querySelector(".ast-embed-checkout-form-steps .steps.ast-current"),a=e.currentTarget.querySelector("a");if(l&&l.classList.remove(o),a&&s){const n=s.querySelector(".woocommerce");var i=a.getAttribute("href");const u=document.querySelector(".ast-embed-checkout-form-steps .step-two");t.forEach(e=>{e.classList.remove(o)}),"#customer_details"===i&&n?(n.classList.remove(r),n.classList.add(c),e.currentTarget.classList.add(o)):"#ast-order-wrap"===i&&n&&(n.classList.remove(c),n.classList.add(r),u.classList.add(o))}}function validateInputs(e){let s=!0,l=!1;return e.forEach(t=>{var o=t.getAttribute("type");const c=t.closest(".form-row");if(c){var r=c.querySelector(".select2"),r=c&&r?c.querySelector(".select2-selection__rendered").getAttribute("title"):t.value?t.value.trim():"";let e="";c.classList.contains("validate-required")&&("checkbox"===o&&t.checked?!(fieldValueCheckbox=!0)===fieldValueCheckbox&&""===e&&(c.classList.add("woocommerce-invalid"),s=!1,e=t):c.classList.remove("woocommerce-invalid"),"email"===o&&!1===/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(r)||""===r?""===e&&(c.classList.add("woocommerce-invalid"),s=!1,e=t):c.classList.remove("woocommerce-invalid"),""!==e&&!1===l&&(l=!0,e.focus()))}}),s}function validateCheckoutInputs(){const e=document.querySelector(".ast-two-step-wrap form.woocommerce-checkout .woocommerce-billing-fields, .ast-two-step-wrap form.woocommerce-checkout .woocommerce-account-fields"),t=document.querySelector(".woocommerce-billing-fields__customer-info-wrapper"),o=document.querySelector(".ast-two-step-wrap form.woocommerce-checkout .woocommerce-shipping-fields");var c='input[type="text"], input[type="tel"], input[type="email"], input[type="password"], input[type="checkbox"], .select2';let r;if(t){let e;const a=document.querySelector("#ast-customer-login-url");var s=document.querySelector(".ast-create-account-section"),l=t.querySelector("#createaccount");(e=a&&a.classList.contains("active")?t.querySelectorAll("#billing_email, #billing_password"):astraAddon.is_registration_required&&s&&"block"===s.style.display||l&&l.checked?t.querySelectorAll("#billing_email, #account_username, #account_password"):t.querySelectorAll("#billing_email"))&&(r=r?Array.prototype.slice.call(r).concat(Array.prototype.slice.call(e)):e)}return e&&(r=r?Array.prototype.slice.call(r).concat(Array.prototype.slice.call(e.querySelectorAll(c))):e.querySelectorAll(c)),validateInputs(r=o&&(s=o.querySelector('h3#ship-to-different-address input[type="checkbox"]'))&&s.checked?r?Array.prototype.slice.call(r).concat(Array.prototype.slice.call(o.querySelectorAll(c))):o.querySelectorAll(c):r)}document.addEventListener("DOMContentLoaded",function(e){const t=document.querySelector("body");if(!astraAddon.cartflows_version&&t&&t.classList.contains("woocommerce-checkout")&&t.classList.contains("ast-woo-two-step-modern-checkout")){const o=document.querySelectorAll(".ast-embed-checkout-form-steps .steps"),c=document.querySelector(".ast-embed-checkout-form-nav-btns");c&&c.addEventListener("click",function(e){validateCheckoutInputs()&&twoStepModernCheckout(e)}),o&&o.forEach(e=>{e.addEventListener("click",function(e){validateCheckoutInputs()&&twoStepModernCheckout(e)})})}});