function menuSettingsEventClick(){const s=document.querySelector(".ast-offcanvas-wrapper");document.addEventListener("click",function(e){if(e.target.matches(".astra-megamenu-opts-btn")){const i=e.target.closest(".menu-item").classList.value;var t,a,n;i.includes("menu-item-depth-")&&(t=i.split("menu-item-depth-")[1].split("")[0],a=e.target.getAttribute("data-menu-title"),e=e.target.getAttribute("data-menu-id"),n=document.querySelector("#nav-menu-meta-object-id").getAttribute("value"),t&&a&&e&&n&&(document.dispatchEvent(new CustomEvent("astra_mega_menu_event",{detail:{menu_depth:t,menu_name:a,menu_id:e,navId:n}})),s.classList.contains("active")||s.classList.add("active")))}})}function onColorReady(){jQuery(document).mouseup(function(e){var t=jQuery(".ast-color"),a=t.find(".astra-color-picker-wrap"),n=t.find(".ast-color-btn-reset-wrap");a.is(e.target)||n.is(e.target)||0!==a.has(e.target).length||0!==n.has(e.target).length||t.find(".components-button.astra-color-icon-indicate.open").click()})}document.addEventListener("DOMContentLoaded",()=>{menuSettingsEventClick()}),function(i){function n(){var a=i(this).closest(".widget"),t=a.find(".widget-inner"),n=a.attr("id"),e=(a.toggleClass("menu-item-edit-active"),{action:"ast_edit_widget",widget_id:n,security_nonce:AstraBuilderMegaMenu.nonceWidget});a.hasClass("open")||a.data("loaded")?a.toggleClass("open"):i.post(ajaxurl,e,function(e){t.html(e.data),a.data("loaded",!0).toggleClass("open"),a.is("[id*=black-studio-tinymce]")&&bstw(a).deactivate().activate(),setTimeout(function(){i(document).trigger("widget-added",[a])},100),a.find(".delete").on("click",function(e){e.preventDefault();e={action:"ast_delete_widget",widget_id:n,security_nonce:AstraBuilderMegaMenu.nonceWidget};i.post(ajaxurl,e,function(e){a.remove(),i("#mega-menu-submit").removeClass("ast-disabled")})}),a.find(".close").on("click",function(e){e.preventDefault(),a.toggleClass("open")}),a.find(".ast-save-widget").on("click",function(e){e.preventDefault();var e=a.find("form").serialize(),t=i(this);t.attr("disabled","disabled"),a.find(".spinner").css("visibility","visible"),i.post(ajaxurl,e,function(e){a.find(".spinner").css("visibility","hidden"),t.removeAttr("disabled"),i("#mega-menu-submit").removeClass("ast-disabled")})})})}document.addEventListener("astra_mega_menu_loaded",function(e){{e=e.detail.menu_id;const a=i(".astra-mm-options-wrap");e={action:"ast_render_widgets",menu_item_id:e,security_nonce:AstraBuilderMegaMenu.nonceWidget},i.post(ajaxurl,e,function(e){var t=e.data.html;e.data.has_widgets&&i(".ast-widget-list").show(),a.find(".ast-widget-list").html(t),i("#ast-widget-sortable").sortable({change:function(e,t){i("#mega-menu-submit").removeClass("ast-disabled")}}),i("#ast-widget-sortable").disableSelection(),i(".widget-action").unbind(),i(".widget-action").on("click",n)})}i(".astra-mm-options-wrap").find(".ast-select2-container").astselect2({placeholder:astMegamenuVars.select2_placeholder,ajax:{url:ajaxurl,dataType:"json",method:"post",delay:250,data:function(e){return{q:e.term,page:e.page,action:"ast_get_posts_list",nonce:astRules.ajax_nonce}},processResults:function(e){return i("#mega-menu-submit").removeClass("ast-disabled"),{results:e}},cache:!0},minimumInputLength:2,language:astRules.ast_lang}),onColorReady()}),document.addEventListener("astra_mega_menu_widget_event",function(e){var t,a;e=e.detail.menu_id,t=i(".ast-select-widget").val(),a=i(".astra-mm-options-wrap"),""!=t&&(i(".ast-widget-list").show(),t={action:"ast_add_widget",widget_id:t,menu_item_id:e,title:i(".ast-select-widget").find("option:selected").text(),security_nonce:AstraBuilderMegaMenu.nonceWidget},i.post(ajaxurl,t,function(e){e=i(e.data);a.find(".ast-widget-list").append(e),i(".widget-action").unbind(),i(".widget-action").on("click",n),i("#mega-menu-submit").removeClass("ast-disabled")}))})}(jQuery);