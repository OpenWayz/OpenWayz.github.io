let spectraImageGalleryLoadStatus=!0;const UAGBImageGalleryMasonry={init(l,r,e,a){let o=2;const n=window.innerHeight/1.25,i=document.querySelector(r);let s=null;l.lightboxThumbnails&&(s=new Swiper(r+"+.spectra-image-gallery__control-lightbox .spectra-image-gallery__control-lightbox--thumbnails",a),e={...e,thumbs:{swiper:s}});const c=new Swiper(r+"+.spectra-image-gallery__control-lightbox .spectra-image-gallery__control-lightbox--main",e),g=(c.lazy.load(),loadLightBoxImages(i,c,null,l,s),i?.querySelector(".spectra-image-gallery__control-loader")),t=i?.querySelector(".spectra-image-gallery__control-button");l.feedPagination&&l.paginateUseLoader?window.addEventListener("scroll",function(){let e=i?.querySelector(".spectra-image-gallery__media-wrapper");var a,t=(e=e||i).lastElementChild.getBoundingClientRect().top+window.scrollY;window.pageYOffset+n>=t&&(t={page_number:o},a=l.gridPages,spectraImageGalleryLoadStatus&&(o>a&&(g.style.display="none"),o<=a&&(UAGBImageGalleryMasonry.callAjax(i,t,l,!1,o,r,c,s),o++,spectraImageGalleryLoadStatus=!1)))}):l.feedPagination&&!l.paginateUseLoader&&(t.onclick=function(){var e=l.gridPages,a={total:e,page_number:o};t.classList.add("disabled"),spectraImageGalleryLoadStatus&&o<=e&&(UAGBImageGalleryMasonry.callAjax(i,a,l,!1,o,r,c,s),o++,spectraImageGalleryLoadStatus=!1)})},createElementFromHTML(e){const a=document.createElement("div");e=e.replace(/\s+/gm," ").replace(/( )+/gm," ").trim();return a.innerHTML=e,a},getCustomURL(e,a){const t=new RegExp("^((http|https)://)(www.)?[a-zA-Z0-9@:%._\\+~#?&//=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%._\\+~#?&//=]*)$");e=parseInt(e.getAttribute("data-spectra-gallery-image-id"));return t.test(a?.customLinks[e])?a.customLinks[e]:void 0},openCustomURL(e){window.open(e,"_blank")},addClickEvents(e,t){const a=e?.querySelectorAll(".spectra-image-gallery__media-wrapper");a.forEach(e=>{const a=UAGBImageGalleryMasonry.getCustomURL(e,t);a&&(e.style.cursor="pointer",e.addEventListener("click",()=>UAGBImageGalleryMasonry.openCustomURL(a)))})},callAjax(l,r,o,n=!1,i,s,c,g){const e=new FormData;e.append("action","uag_load_image_gallery_masonry"),e.append("nonce",uagb_image_gallery.uagb_image_gallery_masonry_ajax_nonce),e.append("page_number",r.page_number),e.append("attr",JSON.stringify(o)),fetch(uagb_image_gallery.ajax_url,{method:"POST",credentials:"same-origin",body:e}).then(e=>e.json()).then(function(e){let a=l?.querySelector(".spectra-image-gallery__layout--masonry");a=a||l;const t=new Isotope(a,{itemSelector:".spectra-image-gallery__media-wrapper--isotope",stagger:10});t.insert(UAGBImageGalleryMasonry.createElementFromHTML(e.data)),imagesLoaded(a).on("progress",function(){t.layout()}),imagesLoaded(a).on("always",function(){const e=document.querySelector(s),a=e?.querySelector(".spectra-image-gallery__control-button");a?.classList?.remove("disabled"),loadLightBoxImages(e,c,null,o,g)}),o.customLinks&&UAGBImageGalleryMasonry.addClickEvents(a,o),(spectraImageGalleryLoadStatus=!0)===n&&l?.querySelector(".spectra-image-gallery__control-button").classList.toggle("disabled"),i===parseInt(r.total)&&(l.querySelector(".spectra-image-gallery__control-button").style.opacity=0,setTimeout(()=>{l.querySelector(".spectra-image-gallery__control-button").parentElement.style.display="none"},2e3))})}},UAGBImageGalleryPagedGrid={init(r,o,e,a){let n=1;const i=document.querySelector(o);let s=null;r.lightboxThumbnails&&(s=new Swiper(o+"+.spectra-image-gallery__control-lightbox .spectra-image-gallery__control-lightbox--thumbnails",a),e={...e,thumbs:{swiper:s}});const c=new Swiper(o+"+.spectra-image-gallery__control-lightbox .spectra-image-gallery__control-lightbox--main",e),g=(c.lazy.load(),loadLightBoxImages(i,c,n,r,s),i?.querySelectorAll(".spectra-image-gallery__control-arrows--grid")),t=i?.querySelectorAll(".spectra-image-gallery__control-dot");for(let e=0;e<g.length;e++)g[e].addEventListener("click",e=>{const a=e.currentTarget;let t=n;switch(a.getAttribute("data-direction")){case"Prev":--t;break;case"Next":++t}i?.querySelector(".spectra-image-gallery__media-wrapper")||i;var e=r.gridPages,l={page_number:t,total:e};t===e||1===t?a.disabled=!0:g.forEach(e=>{e.disabled=!1}),t<=e&&1<=t&&(UAGBImageGalleryPagedGrid.callAjax(i,l,r,g,o,c,s),n=t)});for(let e=0;e<t.length;e++)t[e].addEventListener("click",e=>{const a=e.currentTarget;var e=a.getAttribute("data-go-to"),t=(i?.querySelector(".spectra-image-gallery__media-wrapper")||i,{page_number:e,total:r.gridPages});UAGBImageGalleryPagedGrid.callAjax(i,t,r,g,o,c,s),n=e})},createElementFromHTML(e){const a=document.createElement("div");e=e.replace(/\s+/gm," ").replace(/( )+/gm," ").trim();return a.innerHTML=e,a},getCustomURL(e,a){const t=new RegExp("^((http|https)://)(www.)?[a-zA-Z0-9@:%._\\+~#?&//=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%._\\+~#?&//=]*)$");e=parseInt(e.getAttribute("data-spectra-gallery-image-id"));return t.test(a?.customLinks[e])?a.customLinks[e]:void 0},openCustomURL(e){window.open(e,"_blank")},addClickEvents(e,t){const a=e?.querySelectorAll(".spectra-image-gallery__media-wrapper");a.forEach(e=>{const a=UAGBImageGalleryPagedGrid.getCustomURL(e,t);a&&(e.style.cursor="pointer",e.addEventListener("click",()=>UAGBImageGalleryPagedGrid.openCustomURL(a)))})},callAjax(o,n,i,s,c,g,d){const e=new FormData;e.append("action","uag_load_image_gallery_grid_pagination"),e.append("nonce",uagb_image_gallery.uagb_image_gallery_grid_pagination_ajax_nonce),e.append("page_number",n.page_number),e.append("attr",JSON.stringify(i)),fetch(uagb_image_gallery.ajax_url,{method:"POST",credentials:"same-origin",body:e}).then(e=>e.json()).then(function(a){if(!1!==a.success){let e=o?.querySelector(".spectra-image-gallery__layout--isogrid");const t=(e=e||o).querySelectorAll(".spectra-image-gallery__media-wrapper--isotope"),l=new Isotope(e,{itemSelector:".spectra-image-gallery__media-wrapper--isotope",layoutMode:"fitRows"}),r=(t.forEach(e=>{l.remove(e),l.layout()}),l.insert(UAGBImageGalleryPagedGrid.createElementFromHTML(a.data)),imagesLoaded(e).on("progress",function(){l.layout()}),imagesLoaded(e).on("always",function(){var e=document.querySelector(c);loadLightBoxImages(e,g,parseInt(n.page_number),i,d)}),i.customLinks&&UAGBImageGalleryPagedGrid.addClickEvents(e,i),1===parseInt(n.page_number)?s.forEach(e=>{e.disabled="Prev"===e.getAttribute("data-direction")}):parseInt(n.page_number)===parseInt(n.total)?s.forEach(e=>{e.disabled="Next"===e.getAttribute("data-direction")}):s.forEach(e=>{e.disabled=!1}),o?.querySelector(".spectra-image-gallery__control-dot--active").classList.toggle("spectra-image-gallery__control-dot--active"),o?.querySelectorAll(".spectra-image-gallery__control-dot"));r[parseInt(n.page_number)-1].classList.toggle("spectra-image-gallery__control-dot--active")}})}},loadLightBoxImages=(l,r,e,o,n)=>{if(l){const a=o.paginateLimit,t=document.querySelector("body");if(r.on("activeIndexChange",e=>{if(o.lightboxThumbnails&&n.slideTo(e.activeIndex),o.lightboxDisplayCount){e=e.activeIndex;const a=l.nextElementSibling,t=a.querySelector(".spectra-image-gallery__control-lightbox--count-page");t&&(t.innerHTML=parseInt(e)+1)}r.lazy.load()}),o.lightboxThumbnails&&n.on("activeIndexChange",e=>{r.slideTo(e.activeIndex)}),l.nextElementSibling.classList.contains("spectra-image-gallery__control-lightbox")){const s=l.nextElementSibling;if(s.addEventListener("keydown",e=>{27===e.keyCode&&(t.style.overflow="",s.style.opacity=0,setTimeout(()=>{s.style.display="none"},250))}),s.style.display="none",o.lightboxCloseIcon){const c=s.querySelector(".spectra-image-gallery__control-lightbox--close");c&&c.addEventListener("click",()=>{t.style.overflow="",s.style.opacity=0,setTimeout(()=>{s.style.display="none"},250)})}if(o.lightboxDisplayCount){const g=s.querySelector(".spectra-image-gallery__control-lightbox--count-total");g.innerHTML=o.mediaGallery.length}}const i=e=>{if(r){const a=l?.nextElementSibling;a&&(a.style.display="",a.focus(),setTimeout(()=>{r.slideTo(e)},100),setTimeout(()=>{a.style.opacity=1,t.style.overflow="hidden"},250))}};null!==e?setTimeout(()=>{addClickListeners(l,e,i,a)},1e3):addClickListeners(l,null,i)}},addClickListeners=(e,l,r,o)=>{const a=e.querySelectorAll(".spectra-image-gallery__media-wrapper");a.forEach((e,a)=>{const t=null!==l?a+(l-1)*o:a;e.style.cursor="pointer",e.addEventListener("click",()=>r(t))})};